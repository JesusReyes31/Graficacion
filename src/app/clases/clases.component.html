<div style="display: flex; flex-direction: column; gap: 10px">
    <!-- Control de versiones -->
    <div class="version-control">
      <div class="version-title">
        <i class="fas fa-code-branch"></i>
        <span>Control de Versiones</span>
      </div>
      <div class="version-actions">
        <select 
          class="form-select version-select" 
          [(ngModel)]="currentVersionId"
          (change)="changeVersion($any($event.target).value)">
          <option *ngFor="let version of versions; let i = index" [value]="version.ID_V">
            Versión {{ i + 1 }}
          </option>
        </select>
        <button 
          class="btn version-btn"
          (click)="createNewVersion()">
          <i class="fas fa-plus"></i> Nueva Versión
        </button>
        <button 
          class="btn version-btn guardar"
          (click)="guardarVersion()">
          <i class="fas fa-floppy-disk"></i> Guardar
        </button>
        <button 
          class="btn version-btn delete"
          (click)="eliminarVersion()">
          <i class="fas fa-delete-left"></i> Eliminar
        </button>
      </div>
    </div>
  <!-- Barra de herramientas de relaciones -->
  <div class="relationship-toolbar">
    <button 
      class="btn relationship-btn" 
      (click)="connectAssociation()"
      title="Asociación: Conecta clases con una relación simple">
      <i class="fas fa-link"></i> Asociación
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectAggregation()"
      title="Agregación: Relación todo-parte donde las partes pueden existir independientemente">
      <i class="fas fa-diamond"></i> Agregación
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectComposition()"
      title="Composición: Relación todo-parte donde las partes no pueden existir sin el todo">
      <i class="fas fa-cube"></i> Composición
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectGeneralization()"
      title="Generalización: Relación de herencia entre clases">
      <i class="fas fa-sitemap"></i> Generalización
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectDependency()"
      title="Dependencia: Una clase depende de otra">
      <i class="fas fa-arrow-right"></i> Dependencia
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectRealization()"
      title="Realización: Implementación de una interfaz">
      <i class="fas fa-code"></i> Realización
    </button>
    <button 
      class="btn relationship-btn" 
      (click)="connectAssociationReflexive()"
      title="Asociación Reflexiva: Una clase se relaciona consigo misma">
      <i class="fas fa-sync"></i> Asoc. Reflexiva
    </button>
  </div>

  <!-- Barra de herramientas de multiplicidad -->
  <div class="relationship-toolbar multiplicity-toolbar">
    <button 
      class="btn multiplicity-btn" 
      (click)="setMultiplicity('1..1')"
      title="Exactamente uno">
      <i class="fas fa-equals"></i> 1..1
    </button>
    <button 
      class="btn multiplicity-btn" 
      (click)="setMultiplicity('1..*')"
      title="Uno o muchos">
      <i class="fas fa-asterisk"></i> 1..*
    </button>
    <button 
      class="btn multiplicity-btn" 
      (click)="setMultiplicity('0..1')"
      title="Cero o uno">
      <i class="fas fa-question"></i> 0..1
    </button>
    <button 
      class="btn multiplicity-btn" 
      (click)="setMultiplicity('0..*')"
      title="Cero o muchos">
      <i class="fas fa-star"></i> 0..*
    </button>
    <button 
      class="btn multiplicity-btn" 
      (click)="setMultiplicity('N..M')"
      title="N a M">
      <i class="fas fa-exchange-alt"></i> N..M
    </button>
  </div>

<!-- Modal para Atributo -->
<div *ngIf="isModalVisible && modalType === 'attribute'" class="modal-overlay">
  <div class="modal-content">
    <h2>{{ isEditing ? 'Editar Atributo' : 'Agregar Atributo' }}</h2>
    
    <label for="attributeName">Nombre del Atributo:</label>
    <input type="text" id="attributeName" [(ngModel)]="attributeName" />
    <br>

    <label for="attributeType">Tipo del Atributo:</label>
    <select id="attributeType" [(ngModel)]="attributeType">
      <option value="tipo">otro</option>
      <option value="string">string</option>
      <option value="number">number</option>
      <option value="boolean">boolean</option>
      <option value="char">char</option>
      <option value="float">float</option>
      <option value="double">double</option>
      <option value="object">object</option>
      <option value="Array">Array</option>
      <option value="Map">Map</option>
      <option value="Set">Set</option>
      <option value="Date">Date</option>
      <option value="any">any</option>
      <option value="enum">enum</option>
    </select>

    <br>
    
    <label for="attributeVisibility">Visibilidad:</label>
    <select id="attributeVisibility" [(ngModel)]="attributeVisibility">
      <option value="+">Pública (+)</option>
      <option value="-">Privada (-)</option>
      <option value="#">Protegida (#)</option>
      <option value=" ">Espacio ( )</option>
    </select>

    <div class="modal-actions">
      <button (click)="closeModal()">Cancelar</button>
      <button (click)="saveModalData()">Guardar</button>
    </div>
  </div>
</div>


<!-- Modal para Método -->
<div *ngIf="isModalVisible && modalType === 'method'" class="modal-overlay">
  <div class="modal-content">
    <h2>{{ isEditing ? 'Editar Método' : 'Agregar Método' }}</h2>
    
    <!-- Nombre del Método -->
    <label for="methodName">Nombre del Método:</label>
    <input type="text" id="methodName" [(ngModel)]="methodName" />
    
    <br>

    <!-- Tipo de Retorno -->
    <label for="methodReturnType">Tipo de Retorno:</label>
    <select id="methodReturnType" [(ngModel)]="methodReturnType">
      <option value="tipo">otro</option>
      <option value="void">void</option>
      <option value="string">string</option>
      <option value="number">number</option>
      <option value="boolean">boolean</option>
      <option value="char">char</option>
      <option value="float">float</option>
      <option value="double">double</option>
      <option value="object">object</option>
      <option value="Array">Array</option>
      <option value="Map">Map</option>
      <option value="Set">Set</option>
      <option value="Date">Date</option>
      <option value="any">any</option>
      <option value="Promise">Promise</option>
    </select>
    
    <br>

    <!-- Visibilidad del Método -->
    <label for="methodVisibility">Visibilidad del Método:</label>
    <select id="methodVisibility" [(ngModel)]="methodVisibility">
      <option value="+">Pública (+)</option>
      <option value="-">Privada (-)</option>
      <option value="#">Protegida (#)</option>
      <option value=" ">Espacio ( )</option>
    </select>

    <br>

    <!-- Lista de Parámetros -->
    <h3>Parámetros</h3>
    <div *ngFor="let param of methodParams; let i = index" class="param-row">
      <input type="text" [(ngModel)]="param.paramName" placeholder="Nombre del Parámetro" />
      <select [(ngModel)]="param.paramType">
        <option value="tipo">otro</option>
        <option value="string">string</option>
        <option value="number">number</option>
        <option value="boolean">boolean</option>
        <option value="char">char</option>
        <option value="float">float</option>
        <option value="double">double</option>
        <option value="object">object</option>
        <option value="Array">Array</option>
        <option value="Map">Map</option>
        <option value="Set">Set</option>
        <option value="Date">Date</option>
        <option value="any">any</option>
        <option value="enum">enum</option>
      </select>
      

      <button (click)="removeParameter(i)">X</button>
    </div>

    <!-- Botón para agregar más parámetros -->
    <button (click)="addParameter()">Agregar Parámetro</button>

    <!-- Botones de acción -->
    <div class="modal-actions">
      <button (click)="closeModal()">Cancelar</button>
      <button (click)="saveModalData()">Guardar</button>
    </div>
  </div>
</div>



  <!-- Contenedor principal -->
  <div class="contenedor">
    <div #paletteDiv style="width: 250px; height: 60vh;"></div>
    <div #diagramDiv style="width: 80%; margin-left: 10px; height: 60vh;"></div>
  </div>
</div>
